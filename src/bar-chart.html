<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link type="text/css" rel="stylesheet" href="assets/app.css">
    <title>Basic - Bar Chart</title>
</head>
<body>
</body>
<script type="text/javascript" src="../bower_components/d3/d3.min.js"></script>
<script>
    var w = 500, h = 400, padding = 10, dataset = [1, 2, 3, 5, 8, 13, 21, 34, 55, 89], lineHeight = 10;

    var maxElement = dataset.reduce(function (prev, cur) {
        return ( prev < cur ? cur : prev );
    });


    var svg = d3.select('body')
            .append('svg')
            .attr('width', w)
            .attr('height', h)
            .attr('class', 'chart-container');
    svg.selectAll('rect')
            .data(dataset)
            .enter()
            .append('rect')
            .style('fill', function (data) {
                return 'rgb(' + Math.round(100+(data * 1.4)) + ',0,0)'
            })
            .attr('x', function (data, index) {
                return index === 0 ? 0 : padding + index * ( w / dataset.length);
            })
            .attr('y', function (data) {
                return h - ( h / (maxElement + lineHeight + 2 * padding)) * data; // coordinates system is upside down.

            })
            .attr('width', w / dataset.length - padding)
            .attr('height', function () {
                return ( h / (maxElement + lineHeight + 2 * padding) ) * h;
            });

    svg.selectAll('text')
            .data(dataset)
            .enter()
            .append('text')
            .text(function (data) {
                return data;
            })
            .attr(
            {
                'text-anchor': 'middle',
                x: function (data, index) {
                    return index * ( w / dataset.length ) + ( w / dataset.length + (index === 0 ? -padding : padding)) / 2;  // no padding on first element
                },
                y: function (data) {
                    return h - ( h / (maxElement + lineHeight + 2 * padding)) * data - lineHeight;
                },

                'font-family': 'sans-serif',
                'font-size': 12,
                'fill': '#000',
                'class': 'bar-chart-label chart-label-above',
                'data-bar': function(data,index){
                    return 'bar-' + index;
                }
            })
</script>

</html>